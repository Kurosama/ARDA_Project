\chapter{Teoria sugli algoritmi}

\section{Space Rank}
Nello sviluppo di algoritmi di previsione della destinazione risulta di fondamentale
importanza avere a disposizione una solida base di conoscenza relativa alle
abitudini degli utenti. In particolare e necessario conoscere quali sono i luoghi
importanti per un utente: tali luoghi nella maggior parte dei casi risulteranno
essere le destinazioni dei suoi spostamenti. Tuttavia, in questo particolare
contesto, le definizioni del concetto di importanza e dei relativi indici di valutazione
compongono un campo di ricerca di nuotevole interesse.\\
In questo sezione viene proposta una metodologia di analisi dei dati volta
a stimare l'importanza delle localita sulla base dei comportamenti degli utenti.
L'obiettivo e quello di utilizzare i dati relativi alle visite effettuate dagli utenti
nelle singole localita in modo tale da ottenere dei valori che rappresentino
l'importanza che esse assumono nelle abitudini degli utenti.

\subsection{Criteri di valutazione dell'importanza}
La letteratura presenta diversi casi in cui risulta necessario lo sviluppo di sistemi
di valutazione dell'importanza delle localita.
Esempi di tale necessita si trovano in \cite{cit_42}, nel quale viene presentato l'algoritmo
\textbf{Predestination}, che appunto esegue una suddivisione del territorio ed una
valutazione dell'importanza di ciascuna regione, per indicarne l'appetibilita
rispetto all'utente esaminato. Un altro esempio che va citato e inoltre l'articolo
\cite{cit_43}, nel quale si propone un modello gravitazionale atto a considerare i
flussi di una citta per decidere in quali zone sia preferibile andare ad aprire
nuove attivita commerciali. In un simile contesto risulta evidente l'apporto che
un appropriato criterio di valutazione di importanza delle regioni possa dare.
Definire quali siano le localita importanti per un utente non e tuttavia un
problema banale. Alcuni studi \cite{cit_44} hanno dimostrato che le probabilita che
ciascuno di noi si trovi in una certa localita sono legate alla legge di potenza,
ovvero che tali probabilita relativamente ad una localita sono proporzionali
all'inverso della posizione occupata dalla localita stessa in una scala di importanza.
Questo implica l'esistenza di un ordinamento delle localita basato sull'importanza
che esse hanno per ciascuno di noi. Rimane da considerare come
ottenere informazioni utili alla definizione degli interessi del singolo utente. Per
tale scopo possiamo sempre utilizzare \cite{cit_44}, in quanto esso dimostra chiaramente
come le persone tendano a frequentare sempre gli stessi luoghi, dunque
a passare sempre per le stesse aree. Dopo tale osservazione risulta chiaro come
sia sufficiente rilevare ed analizzare i comportamenti passati dell'utente per
poterne elencare gli interessi, e dunque prevederne i movimenti.
Per definire l'importanza che ciascuna localita ha per l'utente, e dunque
intuitivo adottare i seguenti indici:
\begin{itemize}
\item $\sharp$\textit{visits}: il numero di volte in cui l'utente e stato nella localita;
\item \textit{avgTime}: il tempo medio delle visite effettuate dall'utente nella localita;
\item \textit{totTime}: il tempo totale passato dall'utente nella localita durante le sue visite.
\end{itemize}
La potenza di questi indici e il relativo basso costo computazionale per la rilevazione,
effettuabile a partire da una qualsiasi collezione di dati, previa standardizzazione
della struttura del contenuto. Purtroppo pero tale approccio
ha anche una importante debolezza, difatti questi indici presi separatamente,
possono dare solo una visione parziale delle abitudini degli utenti, e per alcune
applicazioni potrebbero non essere sufficienti. Ad esempio, considerando solamente
$\sharp$\textit{visits}, le localita in cui l'utente solamente passa e quelle in cui l'utente
si ferma per lungo tempo sono equivalentemente valorizzate. Similmente, il
semplice uso di \textit{avgTime} puo portare alla equiparazione di localita frequentemente
visitate a quelle che vengono raramente raggiunte. Migliore dunque
sembrerebbe l'utilizzo dell'indice \textit{totTime}, in quanto esso riesce a valorizzare
sia le lunghe permanenze che un alto numero di passaggi su una particolare
cella. Rimane comunque il problema di come riuscire a differenziare le celle con
stesso \textit{totTime}, difficolta che si e cercato di superare con l'introduzione di un
nuovo indice derivato, ottenuto dalla combinazione lineare degli indici $\sharp$\textit{visits}
ed \textit{totTime}: tale indice e stato qui definito come \textit{combLinear}, e sembrerebbe
la soluzione piu equa, benche faccia sorgere il problema di come pesare i due
indici durante il calcolo della combinazione lineare.\\
Come abbiamo osservato, diverse proposte per la rilevazione dell'importanza
delle localita sono gia state definite, ognuna con pregi e difetti. Alla
luce di cio, e risultato interessante unire alla definizione di un algoritmo di
previsione di traiettorie basato sulla pesatura delle localita anche la stesura e
relativa comparazione di un nuovo indice che potesse competere prestazionalmente
con quelli gia definiti. Nella ricerca del migliore approccio possibile a
tale problema inevitabile e stato imbattersi nell'algoritmo di PageRank \cite{cit_45},
largamente utilizzato nei motori di ricerca per la catalogazione e l'ordinamento
dei documenti ipertestuali come le pagine web. Esso, a partire da una
mappatura dei collegamenti ipertestuali in un grafo pesato, ricava una stima
dell'importanza dei documenti considerati. Similmente l'indice \textit{spaceRank}, da
esso ispirato, si propone di codificare i movimenti osservati degli utenti al fine
di poter analizzare il grafo creato per ottenere una stima dell'importanza delle
localita comprese nell'area analizzata.

\subsection{PageRank}
L'algoritmo di PageRank \cite{cit_45} ha avuto origine nel 1995 da un progetto di ricerca
della Stanford University, a cura di Larry Page. A rendere famoso questo
algoritmo e stato lo sviluppo e la successiva crescita negli anni del primo motore
di ricerca ad utilizzarlo per l'ordinamento dei risultati, Google. L'obiettivo
dell'algoritmo di PageRank e quello di misurare l'importanza di ciascun elemento
di un insieme di documenti con collegamenti ipertestuali. A tal fine
viene calcolato, per ciascun documento, un valore numerico che rappresenta la
probabilita che una persona arrivi a quel dato documento scegliendo ciclicamente
a caso uno dei collegamenti presenti nel documento ipertestuale che sta
leggendo. Il processo matematico, utilizzato per il calcolo del valore numerico
da assegnare a ciascuno dei documenti, si basa sulle catene di Markov. Dato
un insieme dei documenti ipertestuali, viene innanzitutto calcolata la matrice
relativa alle citazioni. Quest'ultima e una matrice \textit{n x n}, dove n e il numero
dei documenti presenti nell'insieme. Su ciascuna riga di tale matrice vengono
inseriti i valori relativi ai collegamenti ipertestuali che puntano a ciascuno dei
documenti indicati dalle colonne. Su tale matrice viene effettuata una normalizzazione
tale da rendere la somma dei valori di ciascuna riga pari ad 1. La
matrice risultante e la matrice di adiacenza del grafo delle citazioni dell'insieme
di documenti.
Il grafo delle citazioni cosi creato puo essere interpretato come una catena
di Markov ed il calcolo dell'autovettore dominante della matrice di adiacenza
definisce la probabilita di trovarsi in ciascuno degli stati della catena di Markov
durante una camminata casuale, ovvero la probabilita di raggiungere ciascuno
dei documenti scegliendo ciclicamente a caso uno dei collegamenti ipertestuali
contenuti nei documenti che vengono presentati, ovvero il valore di PageRank.
Tuttavia un tale calcolo presenterebbe due problemi.\\
Il primo problema, a livello matematico, e relativo alla catena di Markov, la
quale potrebbe non essere ergodica. Una catena di Markov si definisce ergodica
se ciascuno stato della catena (ovvero ciascun nodo del grafo) e:
\begin{itemize}
\item aperiodico: se il suo periodo e pari a 1, ovvero se lo stato non deve sempre
occorrere dopo un multiplo di un certo numero di passi;
\item ricorrente positivo: se in una camminata casuale infinita c'e sempre
probabilita di ritornare in uno stato gia visitato in un numero finito
di passi.
\end{itemize}
Il calcolo dell'autovettore dominante di una matrice relativa ad una catena di
Markov non ergodica potrebbe non convergere e non si avrebbe, quindi, un
limite stabile da poter utilizzare come valore di PageRank.\\
Il secondo problema e invece attinente alla metafora utilizzata da questa
metodologia. Risulta infatti difficile pensare ad un utente che sfogli un insieme
di documenti unicamente seguendo i collegamenti ipertestuali e senza
mai abbandonare un documento per uno qualsiasi dei documenti dell'insieme.
Entrambi i problemi descritti possono essere risolti mediante l'utilizzo di
quella che viene comunemente definita matrice di teletrasporto. Quest'ultima
e una matrice \textit{n x n} che definisce un grafo con un arco di pari peso tra ciascuna
coppia di nodi. Tale grafo puo essere interpretato come una catena di Markov
in cui ad ogni passo e possibile passare dallo stato attuale ad uno qualsiasi
degli stati della catena (compreso quello attuale). Dalla combinazione lineare
delle normalizzazioni delle due matrici descritte si ottiene la matrice il cui
autovettore dominante contiene i valori di PageRank effettivamente utilizzati
quali stima dell'importanza dei documenti dell'insieme. Per tale combinazione
lineare viene utilizzato un fattore d, comunemente definito fattore di salto,
che definisce la probabilita, stabilita a priori, che l'utente effettui un salto dal
documento in cui si trova ad uno qualsiasi dei documenti dell'insieme, ovvero
di seguire i collegamenti definiti dalla matrice di teletrasporto. Dunque, la
matrice utilizzata per il calcolo dei valori di PageRank sara:
\begin{equation}
P = (1 - d) x A + d x T
\end{equation}
dove A e la matrice di adiacenza normalizzata del grafo delle citazioni, T e
la matrice di teletrasporto normalizzata e d e il fattore di salto. Per il calcolo
dell'importanza delle pagine web, dai motori di ricerca viene solitamente
utilizzato un fattore di salto pari a 0.15.\\
Una volta calcolata la matrice di PageRank \textit{P}, non rimane che utilizzarla
per calcolare la matrice di Importanza $M_{imp}$ utilizzando il metodo delle potenze
per ricavarne l'autovettore dominante. Sia x vettore qualsiasi di dimensione n,
ed \textit{P} la matrice di PageRank otterremo la matrice $M_{imp}$ come segue:
\begin{equation}
M_{imp} = \lim_{k \rightarrow +\infty} x P^{k}
\end{equation}
La formulazione proposta in realta non viene mai implementata in quanto
presenta problemi di overflow ed underflow. Per evitarli e percio necessario
eseguire ad ogni passo una normalizzazione del vettore ottenuto, costruendo
una successione definita come segue:
\begin{equation}
\left\{\begin{matrix}
M_{aux}(i+1) M_{imp}(i)P
\\ \beta_{i+1} = normaDue[M_{aux}(i+1)]
\\ M_{imp}(i+1) = \frac{M_{aux}(i+1)}{\beta_{i+1}}
\end{matrix}\right.
\end{equation}
che termina non appena $ M_{imp}(n) - M_{imp}(n- 1) < \varepsilon $ con $ \varepsilon $ scelto dall'utente,
lasciando quindi $ M_{imp} = M_{imp}(n) $.

\subsection{SpaceRank}
In questo capitolo viene proposto un approccio all'analisi dei comportamenti
degli utenti osservati basato sull'utilizzo dell'algoritmo di PageRank. Questo
approccio e stato chiamato in \cite{cit_49} SpaceRank. Come per l'algoritmo di PageRank,
per la costruzione della matrice, il cui autovettore dominante conterra
i valori di valutazione delle localita, vi sono diversi passaggi che, dopo una
denizione piu formale del problema, sono esposti nei seguenti paragrafi.

\subsubsection{Formalizzazione del problema}
Dato un insieme di informazioni relative all'ubicazione di un insieme di utenti
in una data area e lungo un dato periodo di tempo, l'obiettivo e quello
di stimare l'importanza delle localita dell'area di interesse sulla base dei dati
a disposizione. Per effettuare tale analisi, si rende innanzitutto necessario
discretizzare l'area di interesse in un insieme di sotto-aree $L = l_{0},l_{1},\dots,l_{n-1}$
che chiameremo localita. In tale suddivisione non e necessario che le localita
siano della stessa dimensione ma, per semplicita, nella seguente discussione
supporremo che lo siano. Negli esempi in Figura 2.1 , i nodi del grafo, che rappresentano
le localita, sono disposti in griglie quadrate. Deniamo $N_{i}$ come
l'insieme di tutte le localita vicine ad $l_{i}$, ovvero come l'insieme di tutte le localit
a raggiungibili da $l_{i}$ con un solo passaggio, compresa $l_{i}$ stessa, ed N come
l'insieme di tutti gli insiemi $N_{i}$. Supponiamo, quindi, di disporre dei dati relativi
al campionamento dell'ubicazione e della velocita di spostamento di uno
o piu utenti durante un periodo di tempo. Per ciascun utente u e possibile
creare un registro storico $R_{u} = r_{0},r_{1},r_{2},\dots$ contenente i dati a disposizione
per quell'utente, in cui ogni elemento e una tripla $r_{i} = (t,l,s)$, dove t e la marcatura
temporale relativa all'istante in cui e stata effettuata la campionatura,
$l \in L$ e la localita registrata ed s e la velocita di spostamento dell'utente in
quell'istante. Sia, infine, $R = R_{0},R_{1},\dots,R_{m}$ l'insieme dei registri relativi agli m
utenti del campione. Dati gli insiemi $L, N$ ed $R$, l'obiettivo e quello di ottenere
un valore numerico che stimi l'importanza di ciascuna localita $l \in L$.

FIGURA  2.1

\subsubsection{Matrice basata sul registro storico dei dati}
Il primo passo della procedura di calcolo di SpaceRank prevede la mappatura
dei registri relativi alla campionatura dell'ubicazione degli utenti in un grafo
pesato diretto, il cui scopo e di rappresentare le abitudini osservate degli utenti.
Sia A la matrice di adiacenza $n x n$ (dove n e la cardinalita di L) del
grafo delle abitudini. Inizialmente, sia $A[i, j] = 0$ per ciascun valore di i e di
j compresi tra 0 ed n-1. Dato l'insieme R, per ciascun $R_{u} \in R$, per ciascuna
coppia di elementi di $R_{u}$ temporalmente successivi $r_{x}$ ed $r_{x+1}$, deve essere eseguito
l'aggiornamento $A[i, j] = A[i, j] + 1$, dove $l_{i}$ e la localita indicata dalla
tripla $r_{x}$ ed $l_{j}$ e la localita indicata dalla tripla $r_{x+1}$. Compiuto tale procedimento,
ogni elemento $A[i, j]$ della matrice A conterra il numero di movimenti
(ovvero passaggi da una localita ad un'altra) dalla localita i alla localita j effettuati
dagli utenti durante il periodo di osservazione. Si noti che, nel caso
in cui un utente si trovasse nella stessa localita durante due campionamenti
temporalmente successivi, tale comportamento verrebbe mappato nel grafo
delle abitudini come un ciclo sullo stesso nodo; deniremo tale tipologia di
movimenti come permanenze.
Ad esempio in Figura 2.1 (a) viene illustrato un grafo che mappa i possibili
spostamenti in un'area suddivisa in una griglia di quattro localita disposte in
una griglia $2 x 2$ (nella figura non sono visibili i pesi assegnati agli archi).
Tramite un processo di normalizzazione delle righe della matrice A e possibile
ottenere una matrice $\bar{A}$, in cui la somma dei valori di una singola riga sia
ciascun valore $\bar{A}[i, j]$ contenuto in tale matrice puo essere interpretato come
la probabilita che l'utente effettui un movimento dalla localita i alla localita
j sulla base delle abitudini osservate, contenute nell'insieme dei registri R. Il
procedimento piu semplice, ma non l'unico possibile, per ottenere una tale
normalizzazione e quello di dividere ciascun elemento di ciascuna riga della
matrice per la somma dei valori della riga a cui esso appartiene.

\subsubsection{Matrice di transizione}
La matrice $\bar{A}$ finora sviluppata nell'algoritmo di Space Rank non e sicuramente
la soluzione definitiva per la corretta formalizzazione del problema, in quanto
si avrebbe una probabilita pari a zero di raggiungere una localita mai visitata
prima dall'utente e la catena di Markov relativa al grafo delle abitudini
potrebbe non essere ergodica. A tal fine puo essere creata una matrice $\bar{B}$,
che deniremo come matrice di transizione, che rappresenti un grafo avente
un nodo per ciascuna localita $l \in L$ ed un arco per ciascuna coppia di localita
contigue. Sia dunque $\bar{B}$ la matrice definita come:

\begin{equation}
\bar{B}[i,j] =
\left\{\begin{matrix}
\frac{1}{c_{i}} & se l_{j} \in N_{i}\\
0 & altrimenti
\end{matrix}\right.
\end{equation}

dove ci e la cardinalita dell'insieme $N_{i}$. Tale matrice e gia normalizzata e
descrive un grafo corrispondente ad una catena di Markov ergodica in cui si
ha la stessa probabilita di effettuare ad ogni passo una transizione dallo stato
attuale ad uno qualsiasi degli stati che rappresentano le localita vicine a quella
in cui si trova l'utente (compresa quest'ultima).
Ad esempio in Figura 2.1 (b) viene illustrato il grafo di una possibile matrice
$\bar{B}$ relativa ad un'area suddivisa in quattro localita disposte in una griglia
$2 x 2$ (nella gura non sono visibili i pesi assegnati agli archi). In questo caso
particolare, l'insieme dei vicini di ciascuna localita comprende tutte le localita
dell'area di interesse. Lo stesso vale per la localita centrale in Figura 2.1 (c),
dove viene illustrato il grafo di una possibile matrice $\bar{B}$ relativa ad un area
suddivisa in nove localita disposte in una griglia $3 x 3$ (nella figura non sono
visibili i pesi assegnati agli archi), ma non per le altre localita di questo secondo
esempio, dalle quali e possibile raggiungere solo alcune localita (4 o 6 a seconda
della posizione).

\subsubsection{Combinazioni delle matrici}
Ottenute, dunque, le due matrici $\bar{A}$ e $\bar{B}$, che rappresentano rispettivamente
le abitudini osservate degli utenti e la conformazione dell'area d'interesse, e
possibile combinare le due matrici per ottenere una matrice normalizzata a cui
possa essere applicato il calcolo dell'autovettore dominante, come avviene nel
caso del calcolo di PageRank. Come per il calcolo del PageRank, deve essere
utilizzato un fattore di combinazione d, che nel caso dei documenti ipertestuali
viene comunemente definito fattore di salto e che in questo contesto puo essere
definito come fattore di comportamento non abitudinario, dato che denisce
la percentuale di probabilita con cui deve essere presa in considerazione la
possibilita che l'utente si muova al di fuori delle abitudini osservate. La matrice
a cui verra dunque applicato il calcolo dell'autovettore dominante sara:
$$
S = (1 - d) x \bar{A} + d x \bar{B}
$$
In prima istanza, il valore d = 0.15, comunemente utilizzato per il calcolo del
PageRank, puo essere preso in considerazione come un buon valore di combinazione
delle due matrici. Un valore minore darebbe maggiore importanza alle
abitudini osservate, mentre un valore superiore porterebbe a prendere maggiormente
in considerazione un comportamento generico e non legato alle abitudini
osservate. I due casi estremi porterebbero a $S = \bar{A}$, con $d = 0$,
ed a $S = \bar{B}$, con $d = 1$. Ovviamente quest'ultimi due casi sono da
escludere: il primo perche porterebbe agli stessi problemi a causa dei quali e
stata introdotta nel calcolo la matrice $\bar{B}$; il secondo perche non darebbe
alcuna effettiva informazione relativa ai comportamenti osservati degli utenti.

\subsubsection{Calcolo della Matrice di Importanza}
Una volta calcolata la matrice di SpaceRank S, non rimane che utilizzarla per
calcolare la matrice di Importanza $M_{imp}$ utilizzando il metodo delle potenze
per ricavare l'autovettore dominante.\\
Sia x vettore qualsiasi di dimensione n, ed $S$ la matrice di SpaceRank otterremo
la matrice $M_{imp}$ come segue:
\begin{equation}
M_{imp} = \lim_{k \rightarrow +\infty} x S^{k}
\end{equation}
Ovviamente per calcolare effettivamente $M_{imp}$ sara sufficiente eseguire la seguente
successione libera da problemi di undreflow ed overflow:
\begin{equation}
\left\{\begin{matrix}
M_{aux}(i+1) M_{imp}(i)S
\\ \beta_{i+1} = normaDue[M_{aux}(i+1)]
\\ M_{imp}(i+1) = \frac{M_{aux}(i+1)}{\beta_{i+1}}
\end{matrix}\right.
\end{equation}
che termina non appena $ M_{imp}(n) - M_{imp}(n- 1) < \varepsilon $ con $ \varepsilon $ scelto dall'utente,
lasciando quindi $ M_{imp} = M_{imp}(n) $.

\section{ARDA}
Come esposto nell'introduzione, negli ultimi anni, specialmente nel contesto dei
sistemi mobili, sono stati sviluppati diversi algoritmi per la previsione delle
traiettorie degli utenti. Nella maggior parte dei casi essi si basano su complicati
modelli matematici e statistici operanti su informazioni raccolte nel passato. In
questo capitolo, dopo una breve formalizzazione del problema della previsione
delle traiettorie, viene proposto un modello astratto presentato in \cite{cit_49}
per la previsione delle stesse basato sull'utilizzo di una semplice metafora
legata alla fisica dei campi elettrici.

\subsection{Formalizzazione del problema}
Si prenda ad esempio un generico oggetto in movimento. Possiamo indicare
tale oggetto generico come oggetto della previsione (ODP). Assumiamo che
l'ODP si muova su una supercie bidimensionale; cio ci permette una semplice
rappresentazione bidimensionale del problema, ma l'estensione al caso tridimensionale
e di semplice realizzazione. L'obiettivo e quello di determinare la
probabilita con cui l'ODP, che all'istante attuale t0 e posizionato nel punto
$(x_{0}, y_{0})$ sulla superficie, si verra a trovare in ciascuno dei punti del piano ad
un certo istante $t_{i}$ nel futuro, dato un suo attuale vettore di spostamento
$\vec{v_{0}}$.
In prima istanza, questo equivale a cercare una funzione a sette parametri:
\begin{equation}
p(x_{0},y_{0},t_{0},\vec{v_{0}},t_{i},x,y)
\end{equation}
che calcoli un valore di probabilita per ciascun punto $(x, y)$ del piano.
Normalmente, gli spostamenti quotidiani di una persona non sono casuali, ma
guidati dall'interesse della persona stessa verso un piccolo insieme di luoghi
\cite{cit_44}. Risulta quindi ovvio che la posizione di tali oggetti di interesse
influenzi il movimento dell'ODP sulla supercie. Interpretando l'interesse dell'ODP
verso questi luoghi come un'attrazione esercitata su di esso dagli stessi, possiamo
dunque posizionare sulla supercie dei punti di interesse, che possono rappresentare
case, uffici, negozi, citta, stazioni, ecc. Quindi l'obiettivo e quello di
trovare una qualche funzione del tipo:
\begin{equation}
p[k_{1},\dots,k_{n}](x_{0},y_{0},t_{0},\vec{v_{0}},t_{i},x,y)
\end{equation}
che calcoli la probabilita che (x, y) sia la posizione dell'ODP al tempo $t_{i}$,
dato uno schema ssato di punti di interesse sulla supercie $[k_{1},\dots,k_{n}]$.

\subsection{Modello astratto di previsione}
Le metafore legate al mondo reale sono largamente utilizzate in diversi campi
dell'informatica. Questo si deve al fatto che l'utilizzo delle metafore fornisce
una base comune per la condivisione di idee tramite modelli ampiamente
conosciuti e studiati. In questo capitolo viene presentato un modello astratto,
per la previsione delle traiettorie degli utenti nel contesto dei sistemi mobili,
che sfrutta una metafora legata alla sica dei campi elettrici.

\subsubsection{Modello gravitazionale}
Un recente studio \cite{cit_44} ha confermato che ciascuno di noi e legato ad un
insieme di localita che possono essere definite importanti. Le analisi condotte
indicano che vi sono alte probabilita che in un qualsiasi momento una data
persona si trovi in due o tre localita importanti e basse probabilita che si trovi
in un qualsiasi altro posto. Da queste considerazioni si puo dedurre che se un
utente e in movimento ci sono alte probabilita che si stia dirigendo verso uno
di questi punti di interesse. Per ciascuno di noi vi sono infatti alcuni tragitti
molto utilizzati che sono quelli che ci portano da una localita per noi importante
ad un'altra, come ad esempio il tragitto che ci conduce da casa al luogo
di lavoro e viceversa.\\
Tuttavia, durante lo svolgimento delle nostre attivita quotidiane effettuiamo
anche altri spostamenti che ci portano a localita non appartenenti a quel piccolo
insieme di localita definite come importanti. Le probabilita che la destinazione
di un nostro tragitto sia una di queste localita meno importanti e bassa, ma
non nulla.\\
Inoltre, e evidente che la vicinanza delle diverse localita e la velocita e la direzione
di spostamento influenzano il nostro tragitto. Se ad esempio un utente
avanza lentamente in direzione di una localita vicina, anche se quest'ultima
risulta essere di importanza relativa per l'utente, le probabilita che essa sia la
sua destinazione nale sono comunque maggiori rispetto alle probabilita che
intuitivamente assegneremmo ad una localita lontana seppur importante. Se
invece l'utente avanza a velocita sostenuta ed in direzione tangenziale rispetto
ad una localita non molto importante, la probabilita che si assegnerebbe
intuitivamente a quella localita sarebbe bassa.\\
\\
La metafora qui presentata propone un parallelo tra la modalita intuitiva
di assegnazione delle probabilita appena descritta e le leggi siche che regolano
l'attrazione gravitazionale. Se un oggetto si muove in uno spazio in cui agiscono
delle forze gravitazionali prodotte da altri oggetti in posizioni sse, la
traiettoria dell'oggetto verra modicata delle forze, si pensi ad esempio ad un
asteroide che si muova in un sistema planetario. Riprendendo gli esempi portati
precedentemente, se un ODP si trova in un'area soggetta ad una debole
forza di attrazione gravitazionale, se e diretto verso il punto in cui si trova
l'oggetto che genera il campo di attrazione o se la sua velocita e sufficientemente
bassa, l'ODP molto probabilmente verra attratto verso tale oggetto.
Se, invece, la direzione dell'ODP e tangenziale rispetto alla forza di attrazione
e la sua velocita e la distanza dal punto di origine della forza gravitazionale
sono sufficienti, esso sfuggira alla forza generata dal campo di attrazione e
proseguira lungo la sua traiettoria.\\
\\
Supponiamo quindi di conoscere quali sono le localita importanti per un
dato utente, ovvero di utilizzare una scala di importanza con un valore assegnato
a ciascuna di queste e di conoscere la disposizione spaziale di tali localita
in un piano bidimensionale che rappresenti l'area di interesse in cui l'utente
si muove. Supponiamo inoltre di conoscere i dati relativi alla velocita ed alla
direzione di movimento dell'utente in un certo istante temporale t0. Date tali
informazioni e possibile creare un modello sico gravitazionale che rappresenti
la situazione in cui si trova l'utente all'istante t0 secondo il modello astratto
precedentemente descritto.
Si parta da un modello sico di spazio tridimensionale vuoto e si aggiunga,
su uno stesso piano nello spazio tridimensionale, un oggetto sso per ciascuna
delle localita importanti secondo la loro disposizione nell'area di interesse,
assegnando a ciascun oggetto una massa proporzionale all'importanza della
localita che rappresenta. La presenza di questi oggetti ssi nello spazio tridimensionale
dara origine ad uno schema di forze quale risultato dell'interazione
dei campi di attrazione gravitazionale generati dai diversi oggetti. Aggiungendo
al modello sico un oggetto puntiforme di massa trascurabile, il cui vettore
di spostamento sul piano su cui sono stati disposti gli oggetti ssi corrisponde
alla velocita ed alla direzione dell'utente all'istante t0, il movimento di tale
oggetto dipendera dalle forze di attrazione gravitazionale generate dagli altri
corpi presenti (vedi Figura 3.1 ).

FIGURA 3.1

\subsubsection{Generazione del modello}
La metafora legata alla sica gravitazionale e probabilmente quella piu intuitiva
per questo modello astratto di previsione della traiettoria. Tuttavia le
stesse leggi che regolano i campi gravitazionali valgono anche per modelli sici
quali la diffusione del suono e i campi elettrici. Questi ultimi possono risultare
di particolare interesse poiche prevedono la presenza sia di potenziali negativi
generati dalla presenza di cariche negative, che esercitano forze attrattive (per
oggetti di carica positiva) come quelle dei campi gravitazionali, sia di potenziali
positivi generati dalla presenza di cariche positive che esercitano forze
repulsive (per oggetti di carica positiva), come illustrato in Figura 3.2 . Inoltre,
questo parallelo permette una piu semplice rappresentazione sul piano
bidimensionale.\\
La possibilita di introdurre delle forze repulsive in un modello come quello
descritto nel Paragrafo 2.2.1 puo inizialmente sembrare contro intuitiva, ma
puo risultare utile in alcuni casi. Si pensi ad esempio a un sistema di previsione
della destinazione installato in un'autovettura. Vi sono alcune zone che l'utente
non potra raggiungere in auto nonostante la sua traiettoria, come ad esempio
il centro di un lago, una zona in mare aperto o piu semplicemente una zona
a traffico esclusivamente pedonale. In questi casi la traiettoria dovra deviare,
ad esempio verso una localita che rappresenti il parcheggio che solitamente
l'utente utilizza quando deve andare in una zona a traffico pedonale come il
centro di una citta.\\
Come si puo notare, in questo tipo di modello sico, basato sui campi
elettrici, e piu semplice ragionare in termini di potenziale presente in una
certa localita piuttosto che di presenza di una certa carica nella localita stessa.
Inoltre, l'analisi delle abitudini di un utente dara come risultato un valore di
importanza da assegnare a ciascuna delle localita prese in considerazione e
potrebbe non essere banale scegliere un piccolo insieme di punti di interesse
disposti sulla supercie, come invece descritto nel Paragrafo 3.2.1. Si puo
quindi scegliere di interpretare i valori di importanza, assegnati a ciascuna
localita, come i valori opposti del potenziale elettrico presente in quella data
localita. In tal modo, maggiore e l'importanza, minore e il valore del potenziale
e quindi maggiore e l'attrazione esercitata dalla localita.

\subsection{ARDA}
Possiamo ora presentare l'algoritmo di previsione basato sul modello astratto
precedentemente descritto nel Paragrafo 3.2. In questo paragrafo vengono
introdotte le formule utilizzate per eseguire una previsione della traiettoria
dell'utente, sia a breve termine che a lungo termine, sulla base dei valori di
importanza assegnati alle localita secondo un dato indice di stima.
Le simulazioni siche descritte vengono effettuate in uno spazio bidimensionale
a valori continui rappresentante l'area di interesse. Poiche i dati ottenuti
dall'analisi dei comportamenti degli utenti sono relativi ad un insieme
discreto di localita (per le motivazioni illustrate nel Paragrafo 3.2.3), il piano
utilizzato nella simulazione deve essere suddiviso mediante una griglia. Durante
la simulazione, l'applicazione delle forze in gioco previste dal modello
astratto viene operata in modo omogeneo a tutti i punti del piano continuo
appartenenti ad una stessa sezione della griglia, ovvero a tutti i punti dello
spazio appartenenti ad una stessa localita.
Si suppone che i valori di importanza utilizzati siano disponibili per mezzo
di una struttura dati di tipo matriciale $M_{imp}$ che rappresenti la griglia delle
localita.

\subsubsection{Utilizzo dei valori di importanza}
Con l'adozione di un modello gravitazionale, possiamo denire una matrice
$M_{pot}$, rappresentante l'energia potenziale elettrica di ciascuna localita. Ciacun
ODP sara attratto dalle aree a basso potenziale, associate con le localita piu
importanti per l'individuo.
Per derivare i valori della matrice $M_{pot}$ e possibile utilizzare qualsiasi indice di
localita come ad esempio:
\begin{itemize}
\item $\sharp$\textit{visits}: il numero di volte in cui l'utente e stato nella localita;
\item \textit{avgTime}: il tempo medio delle visite effettuate dall'utente nella localita;
\item \text{totTime}: il tempo totale passato dall'utente nella localita durante le sue
visite;
\item \textit{spaceRank}: basato su un analisi dello storico degli spostamenti dell'utente
e sull'analisi dell'intorno di ciascuna localita.
\end{itemize}
Al di la degli indici adottati per l'analisi del territorio, importante e comprendere
come il risultato di tale procedura sia una matrice di importanza
$M_{imp}$, che associa i valori piu alti alle localita dalla maggiore importanza. Dato
che il nostro modello fisico utilizza valori di importanza opposti, dobbiamo
generare partendo da $M_{imp}$ la matrice a valori opposti $M_{pot}$, rappresentante il
potenziale delle locazioni. Per ottenere cio utilizziamo dunque una funzione
monotona decrescente. Nel nostro caso si e scelto di utilizzare per comodita
la funzione $f(x)=-x$, ma sarebbe stato possibile adottare anche funzioni di tipo
polinomiale, logaritmico od esponenziale. A questo punto non rimane altro che
calcolare la matriceMacc delle accelerazioni dipendenti dal potenziale delle aree
di interesse. In particolare ogni cella conterra il vettore accelerazione relativo
alla localita rappresentata dalla cella della matrice. $M_{acc}$ e dunque calcolato
utilizzando il gradiente:
\begin{equation}
M_{acc} = - \vec{\bigtriangledown}(M_{pot})
\end{equation}
Infine, per ottenere una matrice di accelerazione che abbia dei vettore accelerazione
che abbiano una magnitudo dello stesso ordine di quanto osservato nei
dati rilevati, andiamo a normalizzare i vettori di accelerazione ottenuti in $M_{acc}$
in modo che la media delle accelerazioni rilevate nei dati acquisiti corrisponda
alla media delle accelerazioni contenute in $M_{acc}$. Per fare questo ultimo passo
dunque e opportuno seguire la seguente procedura:
\begin{enumerate}
\item Rilevare tutte le magnitudo dei vettori di accelerazione dai dati acquisiti
e calcolarne il valore medio: \textit{AvgRealMagnitude}
\item Rilevare tutte le magnitudo dei vettori di accelerazione di Macc e calcolarne
il valore medio: \textit{AvgMaccMagnitude}
\item Per ogni vettore accelerazione diMacc moltiplicare gli elementi del vettore
per la costante ricavata da $\frac{AvgRealMagnitude}{AvgMaccMagnitude}$
\end{enumerate}
FIGURA 3.4

\subsubsection{Calcolo della traiettoria futura}
Arrivati a questo punto abbiamo preparato tutte le strutture dati necessarie
per il calcolo della traiettoria. E' dunque possibile la previsione della traiettoria
utilizzando pochi semplici fattori:
\begin{itemize}
\item Un tempo di campionamento, indicante la profondita temporale in secondi
della singola pervisione (Ad esempio: quanti secondi in avanti
prevedere). Nelle nostre rilevazioni abbiamo utilizzato $\bigtriangleup_{t} = 1$
\item La posizione $(x_{1}; y_{1})$ al tempo corrente $t_{1}$
\item La posizione $(x_{0}; y_{0})$ al tempo $t_{0} = t_{1} - \bigtriangleup_{t}$
\item La matrice di accelerazione $M_{acc}$, dove $M_{acc}[x,y]$ contiene il vettore di
accelerazione per la localita (x, y)
\item Una funzione frenante $\gamma(M_{imp},x,y)$, che ritorni il fattore frenante in base
all'importanza della localita
\end{itemize}
Analizzando gli elementi sopra proposti notiamo subito l'introduzione di
una funzione frenante, della quale ancora non era stato fatto espressamente
cenno nella presentazione del modello adottato. Per comprendere il senso di
tale funzione e fondamentale ritornare alla metafora che vede l'ODP come una
pallina che rotola su un territorio formato da tante localita, ognuna portata
ad applicare una forza sulla pallina. Tali forze saranno neutre o repulsive
nel caso di localita poco importanti o addirittura da evitare (ad esempio le
caselle che si trovano al centro di un lago o del mare) saranno invece attrattive
nel caso di celle importanti in cui l'utente ha soggiornato a lungo in passato.
Proprio in questo ultimo caso, dunque, e necessario che tali celle possano
frenare il movimento della pallina rappresentante l'ODP, no anche a fermarne
l'avanzamento.
Nel nostro caso abbiamo adottato una funzione frenante che garantisse
fattori frenanti che andassero dal 1.5\% al 10\% del valore ad ogni previsione,
a seconda dell'importanza della localita percorsa. Tale decisione ha dunque
portato alla definizione della seguente funzione:
\begin{equation}
    \gamma(M_{imp},x,y) = 0.015 + 0.085 \times M_{imp}[x,y]
\end{equation}
Una volta definiti i vari elementi del processo previsionale, non rimane che
proporre la formula adottata per simulare l'itinerario dell'ODP e quindi per
prevedere la posizione $(x_{2},y_{2})$ dell'utente al tempo $t_{2} = t_{1} +\bigtriangleup_{t}$. Tale funzione
e la Verlet integration formula:
\begin{equation}
\begin{matrix}
(x2; y2) = & \left \{ [2 - \gamma(M_{imp},x_{1},y_{1})] \times (x_{1},y_{1}) \right \}\\
 & - \left \{ [1 - \gamma(M_{imp},x_{1},y_{1})] \times (x_{0},y_{0}) \right \} \\
 & + \left \{ M_{acc}[x,y] \times \bigtriangleup_{t}^{2} \right \}
\end{matrix}
\end{equation}
Tale formula puo essere applicata iterativamente per calcolare le future
posizioni dell'ODP in ogni tempo $t_{k} = t_{1} + (k - 1) \times \bigtriangleup_{t}$, con $k \geq 2$ .

\subsubsection{Utilizzo di informazioni aggiuntive}
L'algoritmo nora descritto prevede l'utilizzo, come unica fonte di informazioni
relative all'importanza delle localita, della matrice $M_{imp}$ costruita in base ai
valori di importanza ottenuti dall'analisi dei comportamento dell'utente durante
il periodo di osservazione. Tuttavia il modello astratto prevede l'utilizzo
di informazioni sull'importanza delle localita indipendentemente dalla fonte di
tali dati.\\
Se nella precedente discussione si e presupposto di utilizzare i valori ottenuti
dal calcolo dell'algoritmo SpaceRank, e tuttavia possibile utilizzare per
l'algoritmo di previsione un qualsiasi indice di importanza, costruendone la
relativa matrice di valori assegnati alle localita dell'area di interesse. Ad esempio,
e possibile scegliere di utilizzare dei valori di importanza calcolati solo
relativamente ad un dato giorno della settimana o ad un certo periodo di tempo
all'interno di una giornata, cercando in tal modo specializzare la previsione
in base all'orario in cui viene fatta. Allo stesso modo e possibile scegliere di
utilizzare i dati relativi al solo utente in questione oppure quelli relativi a tutti
gli utenti osservati, sfruttando l'opportunita di basarsi su un'importanza di
tipo globale o condivisa nel caso in cui, ad esempio, non siano disponibili i
dati relativi ad un certo utente per una data zona.\\
Altre tipologie di dati che possono essere integrate in questo algoritmo e
sfruttate in alcune particolari situazioni sono quelle deducibili da programmi
di tipo agenda o da reti sociali. Molti programmi che offrono la funzionalita di
calendario permettono infatti di aggiungere informazioni relative alla localita in
cui un dato evento avra luogo. L'importanza relativa a tali tipi di localita puo
quindi essere aumentata durante un dato arco temporale che include l'evento
stesso. Le informazioni relative al posizionamento di amici o colleghi puo essere
sfruttata in modo simile, presupponendo che la destinazione dell'utente possa
essere inflenzata dalla presenza di conoscenti in alcune localita.\\
La flessibilita del modello nella codica dei dati da utilizzare come informazioni
sull'importanza delle localita viene sottolineata dalla semplicita con
la quale le diverse tipologie di dati possono essere integrate in un'unica valutazione.
Due o piu fonti di dati, o metodologie di analisi, possono infatti essere
sovrapposte, mediante una combinazione lineare delle matrici di importanza
relative alle singole fonti, generando un'unica matrice:
\begin{equation}
M_{imp} = \alpha_{1}M_{fonte1} + \alpha_{2}M_{fonte2} + \dots
\end{equation}
dove $\alpha_{1}M_{fonte1} + \alpha_{2}M_{fonte2} + \dots$ sono le matrici relative
alle singole fonti ed $\alpha_{1},\alpha_{2},\dots$
sono i rispettivi pesi utilizzati per la combinazione lineare.
